## 파일 접근 권한

| 권한 |                파일                |                                        디렉토리                                        |
| :--: | :--------------------------------: | :------------------------------------------------------------------------------------: |
| 읽기 |   파일을 읽거나 복사할 수 있다.    | `ls` 명령으로 디렉토리 목록을 볼 수 있다. (`ls`의 옵션은 실행 권한이 있어야 사용 가능) |
| 쓰기 | 파일을 수정, 이동, 삭제할 수 있다. |                           파일을 생성하거나 삭제할 수 있다.                            |
| 실행 |       파일을 실행할 수 있다.       |          `cd` 명령을 사용하거나, 파일을 디렉토리로 이동하거나 복사할 수 있다.          |

- `chmod -R`: 하위 디렉토리까지 접근 권한 변경

---

## 기호를 이용한 파일 접근 권한 변경

- `chmod [사용자 카테고리 문자][연산자 기호][접근 권한 문자] [파일명]`

  - 사용자 카테고리 문자

    - `u`: 사용자
    - `g`: 그룹
    - `o`: 소유자, 그룹 이외의 사용자
    - `a`: 모든 사용자

  - ex. `chmod u+x [filename]`: 사용자에게 실행 권한 추가

- 권한은 `[rwx][rwx][rwx]` 인데, `[소유자][그륩][기타 사용자]` 순서이다.

## 기본 접근 권한 설정

- 파일의 기본 접근 권한: `-rw-rw-r--`, `664`
- 디렉토리의 기본 접근 권한: `drwxrwxr-x`, `775`

- 기본 접근 권한 확인 및 변경

  - `umask`: 기본 접근 권한 확인 및 변경

    - ex. `umask 002`: 기본 접근 권한을 `664`로 변경

- umask 진리표

| 요청 권한 |  1  |  1  |  0  |  0  |
| :-------: | :-: | :-: | :-: | :-: |
|  마스크   |  1  |  0  |  1  |  0  |
|   결과    |  0  |  1  |  0  |  0  |

![picture 1](../../../images/TMP_LINUX_1.png)
![picture 2](../../../images/TMP_LINUX_2.png)

- 쉽게 생각하면,

  - 일반 파일의 경우, 최대 권한이 `666`이므로 실제 접근 권한은 `666` - `umask`이다.
  - 디렉토리의 경우, 최대 권한이 `777`이므로 실제 접근 권한은 `777` - `umask`이다.

---

## 특수 접근 권한 설정

- `SetUID 4***`

  - SetUID가 설정된 파일을 실행하면 해당 파일이 실행되는 동안에는 파일을 실행한 사용자의 권한이 아니라 파일 소유자의 권한이 적용
  - `chmod 4755 [filename]` 을 수행하고 해당 파일의 권한을 보면 `-rwsr-xr-x`로 설정된 것을 확인할 수 있다.
  - 예를 들어, `passwd` 명령에는 SetUID가 설정되어 있으므로, `passwd` 명령을 실행하면 `root` 권한으로 실행된다.  
    `passwd`에 SetUID가 설정된 이유는 `passwd` 명령을 실행하면 `/etc/shadow` 파일을 수정하는데, 이 파일의 소유자는 `root`이므로 `root` 권한이 필요하다.

- `SetGID 2***`

  - SetGID가 설정된 파일을 실행하면 해당 파일이 실행되는 동안에는 파일 소유 그룹의 권한으로 실행
  - `chmod 2755 [filename]` 을 수행하고 해당 파일의 권한을 보면 `-rwxr-sr-x`로 설정된 것을 확인할 수 있다.

- Sticky bit `1***`

  - Sticky bit는 디렉토리에 설정 가능하다.
  - 디렉토리에 sticky bit이 설정되어 있으면 해당 디렉토리에는 누구나 파일을 생성할 수 있다.
  - `chmod 1755 [filename]`을 수행하고 해당 파일의 권한을 보면 `rwxr-xr-t`로 설정된 것을 확인할 수 있다.

---
