## 프로세스의 개념

- 프로세스: 현재 시스템에서 실행 중인 프로그램
- 리눅스는 다중 프로세스 시스템으로, 동시에 여러 개의 프로세스를 실행한다.

- 모든 프로세스는 부모-자식 관계를 가진다.

- 프로세스 번호:

  - 각 프로세스는 고유 번호를 가지며, 이를 PID(Process ID)라고 한다.
  - 1번 PID는 kernel, 2번 PID는 init 프로세스를 의미한다.

- 프로세스 종류:

  - 데몬 프로세스: 특정 서비스를 제공하기 위해 존재하며, Linux kernel에 의해 실행된다.
  - 고아 프로세스: 자식 프로세스가 실행 중인데, 부모 프로세스가 먼저 종료된 경우
  - 좀비 프로세스: 자식 프로세스가 종료했음에도 불구하고 process table에 남아 있는 경우
    - 좀비 프로세스가 많아지면 ptable의 용량이 부족해져 정상적인 프로세스가 실행되지 않을 수도 있다.

---

## 프로세스 관리 명령

- `ps`: 현재 실행 중인 프로세스에 대한 정보 출력

  - `ps -e`: 시스템에서 실행 중인 모든 프로세스 출력
  - `ps -f`: 프로세스의 상세 정보 출력
  - `ps -u [uid]`: 특정 사용자의 프로세스 출력
  - `ps -p [pid]`: 특정 프로세스 출력
  - BSD option: 앞에 `-`가 붙지 않는다. Ex. `ps aux`
    - `ps a`: 현재 터미널에서 실행시킨 모든 프로세스 출력

- `pgrep`: 지정한 패턴과 일치하는 프로세스의 정보 출력

  - ex) `pgrep bash`

- 시그널: 프로세스에게 무언가 발생했음을 알리는 간단한 메시지

  - 번호로 구분되며, 이름을 가진다.
  - 프로세스는 기본적으로 시그널을 수신하면 종료한다.

- `kill`: 프로세스에 시그널을 보낸다.

  - `kill -9 [pid]`: 프로세스 강제 종료
  - ex) `kill -9 $(pgrep -x bash)`

- `pkill`: PID가 아닌 프로세스 이름으로 프로세스를 종료한다.

  - ex) `pkill bash`

- `killall`: `pkill` 처럼 프로세스 이름으로 프로세스를 종료한다.

  - 해당 이름으로 실행중인 모든 프로세스를 종료
  - 해당 프로세스를 소유하고 있어야 한다.

- `top`: 현재 실행 중인 프로세스의 정보를 주기적으로 출력

---

## foreground/background 프로세스와 작업 제어

- foreground 작업:

  - foreground process: 사용자가 입력한 명령이 실행되어 결과가 출력될 때까지 기다리는 방식으로 처리되는 프로세스
  - ex) `sleep 100`

- background 작업:

  - 백그라운드 방식으로 명령을 실행하면 명령의 처리가 끝나는 것과 관계없이 곧바로 프롬프트가 출력되어 사용자가 다른 작업을 계속할 수 있음
  - 한 터미널에서 여러 개의 프로세스를 동시에 실행 가능
  - 명령을 백그라운드로 실행하려면 명령의 마지막에 & 기호를 추가

- 작업 제어

  - 작업 전환: foreground <-> background 작업 전환
  - 작업 일시 중지
  - 작업 종료

- `jobs`: 백그라운드 작업의 목록을 출력

  - `jobs [%jobID]`: 특정 작업의 상태 출력

- `fg [%jobID]`: 백그라운드 작업을 foreground로 전환
- `bg [%jobID]`: foreground 작업을 백그라운드로 전환, `ctrl + z`로 일시 정지 후 실행

- 로그아웃 후에도 백그라운드 작업 계속 실행하기

  - 백그라운드 작업을 실행한 터미널이 종료되거나 사용자가 로그아웃하면 실행 중이던 백그라운드 작업도 함께 종료
  - `nohup`: 로그아웃 후에도 백그라운드 작업 계속 실행
    - `nohup [command] &`
    - `nohup.out` 파일에 출력 결과가 저장
    - ex) `nohup find / -name passwd > pw.dat 2>&1 &`에서 `2>&1 &`는 에러 메시지를 `pw.dat`에 저장하고, 백그라운드로 실행하라는 의미.  
      특히 `2>&1`은 에러 메시지를 표준 출력으로 리다이렉트하라는 의미이다.

---

## 작업 예약

- `at`: 예약한 명령을 정해진 시각에 실행

  - `at 10:00 pm`
  - `at 8:15 am tomorrow`
  - `at -l`: 예약된 작업 목록 출력

- `atq`: 예약된 작업 목록 출력
- `atrm`: 예약된 작업 삭제, `atrm [jobID]`

- `crontab [-u UserID] [opt] [filename]`: 주기적으로 실행할 명령을 지정

  - `crontab -l`: crontab에 등록된 명령 출력
  - `crontab -e`: crontab에 명령 추가
  - `crontab -r`: crontab에 등록된 명령 삭제
  - `crontab` 파일 형식:
    - crontab 명령으로 관리하는 파일은 사용자별로 생성
    - crontab 파일에는 여러 개의 작업을 저장할 수 있으며 한 행에 하나의 작업을 설정
    - crontab 파일의 한 행: `[분][시][일][월][요일][작업 내용]`
      - `*`: 모든 값, 공백 문자로 구분, 요일은 0이 일요일

---
