# Why Terraform

- 소프트웨어는 컴퓨터에 코드를 작성하는 것으로 끝나지 않는다. 테스트를 통과했다고 끝나는 것도 아니다.  
  그리고 코드 리뷰를 받았다고 끝나는 것도 아니다. 소프트웨어는 사용자에게 _전달_ 될 때까지 끝난 것이 아니다.

- _Software deivery_ 는 프로덕션 서버에서 코드를 실행하거나 트래픽 급증을 감당하도록 짜거나, 공격자로부터 보호하는 등  
  코드를 고객이 사용할 수 있도록 하는 모든 작업을 말한다. Terraform에 대해 알아보기 전, Terraform이 software delivery의  
  어떤 부분에 적합한지 살펴보자.

## What is DevOps?

- 이전에 소프트웨어를 만들고 싶다면 여러 개의 하드웨어도 함께 관리했어야 했다. 이런 부수적인 리소스가 소모되기 때문에  
  코드를 짜는 Developers(Devs) 팀과 하드웨어를 관리하기 위한 Operations(Ops) 팀이 나눠지게 되었다.

- 일반적인 Dev 팀은 애플리케이션을 개발하고 Ops 팀에게 전달했다. 이후에 Ops 팀에서는 해당 애플리케이션을 어떻게 배포하고  
  실행시킬지에 대해 고민했다. 그리고 이러한 작업 대부분은 수동적으로 이뤄졌다.

- 이런 방식은 처음엔 잘 동작하다가 회사 규모가 커지면서 문제점들이 생기게 된다. 예를 들어, 배포가 수동적으로 이뤄지기 때문에  
  서버 개수가 증가하면서 배포가 느려지고, 고통스럽고, 예측이 어렵게 된다. 그리고 Ops 팀도 실수를 할 수 있게 되기에  
  서버 하나가 다른 서버들과 살짝 다른 설정값을 가지게 되는 _snowflake server_ 들도 생기게 된다.  
  결과적으로 버그 수도 증가하고, 장애와 다운 타임이 점점 늘어나게 된다.

- Ops 팀은 이런 문제를 해결하기 위해 배포 주기를 1주로 늘리고, 이후에는 1달로 늘리게 된다. 그리고 Dev 팀은 이러한  
  배포주기에 맞추기 위해 배포 직전에 모든 코드를 병합하려 하고, 결국 수많은 merge conflict들이 발생하게 된다.  
  그 누구도 배포 브랜치를 안정화할 수 없다. 팀들은 서로를 탓하기 시작하고, 이는 회사에게까지도 영향을 끼치게 된다.

- 요즘에는 많은 회사들이 직접 datacenter를 관리하지 않고, AWS, GCP 등의 public cloud를 사용한다.  
  그 덕분에 하드웨어를 관리하는 대신 Ops 팀들은 Chef, Puppet, Terraform, Docker, Kubernetes 등의  
  소프트웨어를 관리하는 데에 대부분의 업무를 투입한다.

- 결과적으로 Dev와 Ops 팀은 모두 소프트웨어에 업무 시간을 할당하게 되고, 이 두 팀 사이의 차이점이 점점 모호해지게 된다.  
  물론 지금도 애플리케이션 코드만 짜는 Dev 팀, 그리고 운영 코드만 짜는 Ops 팀을 따로 분리하는 것이 잘못된 것은 아니지만,  
  한가지 분명한 것은 이제는 Dev와 Ops 팀이 긴밀하게 협업해야 하는 관계가 되었다는 것이다.  
  여기서 _DevOps 움직임_ 이 생겨난다.

- DevOps는 팀 이름도 아니고, 특정 기술의 이름도 아니다. 대신 DevOps는 프로세스, 아이디어, 그리고 기술들의 집합을 말한다.  
  DevOps에 대한 다양한 정의가 있지만, 이 책에서는 아래의 정의를 사용한다.

  - DevOps: DevOps의 목적은 소프트웨어의 전달을 더욱 효율적으로 진행하는 것이다.

- 배포 시기에 맞춰 급하기 병합하는 대신, 코드를 지속적으로 통합하고 배포 가능한 상태로 관리한다.  
  그리고 한 달에 한 번씩 배포하는 대신, 하루에도 몇 번씩 배포할 수 있다. 그리고 지속적인 장애와 다운 타임이 발생하지 않고  
  monitoring, alerting 등을 활용해 더욱 안정적이고 자가 치유(self healing)가 가능한 시스템을 구성한다.

- DevOps의 변화를 받아들인 회사들이 얻은 이점은 굉장하다. 예를 들어 Nordstrom은 DevOps 철학을 적용하고 나서 기존보다  
  매달 배포되는 신규 기능의 개수를 2배로 늘렸고, 장애를 절반으로 감소시켰으며, 개발 프로세스 또한 절감되었다.

- DevOps 움직임에는 4가지의 핵심 가치가 있는데, 바로 문화(culture), 자동화(automation), 수치화(measurement),  
  그리고 공유(sharing)이다. 이 책에서는 automation에 대해 집중한다.

- 목표는 소프트웨어 배포 프로세스를 최대한 자동화하는 것이다. 여기에는 인프라를 관리하기 위해 웹 페이지를 들어가거나  
  shell command를 입력하는 대신 코드를 사용하는 것도 포함된다. 이 개념을 IaC(Infrastructure as Code)라 한다.

---
